<div class="container">
	<div class="row">
		<div class="col-12 text-center">
			<h1 class="display-1">Rendelés véglegesítése</h1>
		</div>
	</div>

	<div class="row justify-content-center">
		<div class="col-12 col-xl-10">
			<form [formGroup]="orderFinalizeForm" (ngSubmit)="onSubmit()" novalidate>
				<div class="form-group text-center mb-3">
					<h4>Szállítási cím</h4>

					<select
						class="form-select text-center"
						aria-label="Default select example"
						formControlName="address"
					>
						<option disabled value="">Cím választása...</option>
						<option *ngFor="let address of addresses" [ngValue]="address">
							{{ address }}
						</option>
					</select>

					<button
						type="button"
						class="btn btn-primary mt-2"
						(click)="openEditAddressModal()"
					>
						Új cím felvétele
					</button>

					<!-- Errors -->
					<ngb-alert
						[dismissible]="false"
						type="danger"
						*ngIf="address?.dirty && address?.invalid"
					>
						<p *ngIf="address?.errors?.['required']">
							A szállítási címet kötelező megadni!
						</p>
					</ngb-alert>
				</div>

				<div class="form-group text-center mb-3">
					<h4>Fizetés</h4>
					<div class="form-check form-check-inline">
						<input
							type="radio"
							id="radioCash"
							formControlName="paymentType"
							value="cash"
							class="form-check-input"
						/>
						<label class="form-check-label" for="radioCash">Készpénz</label>
					</div>
					<div class="form-check form-check-inline">
						<input
							type="radio"
							id="radioCreditCard"
							formControlName="paymentType"
							value="creditCard"
							class="form-check-input"
						/>
						<label class="form-check-label" for="radioCreditCard"
							>Bankkártya/Hitelkártya</label
						>
					</div>

					<!-- Errors -->
					<ngb-alert
						[dismissible]="false"
						type="danger"
						*ngIf="paymentType?.dirty && paymentType?.invalid"
					>
						<p *ngIf="paymentType?.errors?.['required']">
							A fizetési módot kötelező megadni!
						</p>
					</ngb-alert>
				</div>

				<div class="table-responsive-sm table-light">
					<h4 class="text-center">Kosár tartalma</h4>
					<table class="table table-striped table-hover align-middle">
						<thead class="table-info">
							<tr>
								<th role="col" class="text-center">Név</th>
								<th role="col">Leírás</th>
								<th role="col" class="min-width-cell text-center">Ár</th>
							</tr>
						</thead>
						<tbody>
							<tr *ngFor="let pizza of pizzas">
								<td class="text-center text-break mw-100px">
									{{ pizza.name }}
								</td>

								<td class="text-break">{{ pizza.description }}</td>
								<td class="min-width-cell text-center">{{ pizza.price }} Ft</td>
							</tr>
						</tbody>
					</table>
				</div>

				<div class="text-center">
					<h3>Végösszeg: {{ sumOfPizzaPrices() }} Ft</h3>

					<button
						type="submit"
						class="btn btn-primary me-2"
						[disabled]="orderFinalizeForm.invalid"
					>
						Rendelés
					</button>
					<a [routerLink]="['/order-cart']" class="btn btn-secondary">Vissza</a>
				</div>
			</form>
		</div>
	</div>
</div>
